{"version":3,"sources":["panels/Home.js","panels/Persik.js","App.js","index.js"],"names":["ROUTE","Home","_ref","id","go","_React$useState","React","useState","_React$useState2","Object","slicedToArray","preview","setPreview","_React$useState3","_React$useState4","result","setResult","_React$useState5","_React$useState6","isLoading","setLoading","react_default","a","createElement","es6","title","top","before","document_default","size","level","onChange","e","photo","target","files","URL","createObjectURL","formData","FormData","append","fetch","method","body","then","response","json","console","log","link","camera_default","onClick","data-to","Fragment","className","style","margin","src","alt","Persik","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","videoRef","createRef","canvasRef","makePhoto","alert","detectFrame","video","model","detect","predictions","hasPerson","some","p","class","setState","renderPredictions","requestAnimationFrame","ctx","current","getContext","clearRect","canvas","width","height","font","textBaseline","forEach","prediction","x","bbox","y","strokeStyle","lineWidth","strokeRect","fillStyle","textWidth","measureText","textHeight","parseInt","fillRect","fillText","state","_this2","md","MobileDetect","window","navigator","userAgent","mediaDevices","getUserMedia","webCamPromise","audio","facingMode","mobile","exact","stream","srcObject","Promise","resolve","reject","onloadedmetadata","modelPromise","cocoSsd","all","values","catch","error","finally","Icon","Icon28CancelOutline","Icon24Camera","text","left","back_default","disabled","accept","autoPlay","playsInline","muted","ref","Component","App","activePanel","currentTarget","dataset","to","fetchedUser","connect","subscribe","detail","type","data","send","panels_Home","src_panels_Persik","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.14519160.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, Button, Group, Div, PanelHeader, File, Separator, Spinner } from '@vkontakte/vkui';\nimport Icon24Document from '@vkontakte/icons/dist/24/document';\nimport Icon24Camera from '@vkontakte/icons/dist/24/camera';\n\nfunction arrayBufferToBase64(buffer) {\n  var binary = '';\n  var bytes = [].slice.call(new Uint8Array(buffer));\n\n  bytes.forEach((b) => binary += String.fromCharCode(b));\n\n  return window.btoa(binary);\n};\n\nconst ROUTE = 'https://api-government-dev.itlabs.io/etagi-sale/photo/api/photo_process'\n\nconst Home = ({ id, go }) => {\n\tconst [preview, setPreview] = React.useState(null)\n\tconst [result, setResult] = React.useState(null)\n\tconst [isLoading, setLoading] = React.useState(false)\n\n\t// ya disk\n\tfunction downloadImage(url) {\n\t\tfetch(url).then((response) => {\n\t\t\tresponse.arrayBuffer().then((buffer) => {\n\t\t\t\tconst base64Flag = 'data:image/jpeg;base64,';\n\t\t\t\tconst imageStr = arrayBufferToBase64(buffer);\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetResult(base64Flag + imageStr);\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction handleChangeFile(e) {\n\t\tconst photo = e.target.files[0];\n\t\tsetPreview(URL.createObjectURL(photo));\n\n\t\tvar formData  = new FormData();\n\t\tformData.append(\"photo\", photo);\n\t\t\n\t\tsetLoading(true);\n\n\t\tfetch(ROUTE, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: formData\n\t\t}).then((response) => {\n\t\t\t\treturn response.json()\n\t\t}).then(json => {\n\t\t\tconsole.log(json)\n\t\t\tsetResult(json.link);\n\t\t\tsetLoading(false);\n\t\t});\n\t}\n\n\treturn (\n\t\t<Panel id={id}>\n\t\t\t<PanelHeader>Главная</PanelHeader>\n\t\t\t<Group title='Загрузка картинки'>\n\t\t\t\t<Div>\n\t\t\t\t\t<File\n\t\t\t\t\t\ttop=\"Загрузить\"\n\t\t\t\t\t\tbefore={<Icon24Document />}\n\t\t\t\t\t\tsize=\"xl\"\n\t\t\t\t\t\tlevel=\"secondary\"\n\t\t\t\t\t\tonChange={handleChangeFile}\n\t\t\t\t\t/>\n\t\t\t\t</Div>\n\t\t\t\t<Div>\n\t\t\t\t\t<Button before={<Icon24Camera />} size=\"xl\" level=\"2\" onClick={go} data-to=\"persik\">\n\t\t\t\t\t\tСделать фото\n\t\t\t\t\t</Button>\n\t\t\t\t</Div>\n\t\t\t</Group>\n\t\t\t{\n\t\t\t\t\t(isLoading || result) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Group title=\"Стало\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tisLoading && (\n\t\t\t\t\t\t\t\t\t\t<div className='Preloader'>\n\t\t\t\t\t\t\t\t\t\t\t<Spinner className=\"Spinner\" /> <span>Загрузка</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t!isLoading && result && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Separator style={{ margin: '12px 0' }} />\n\t\t\t\t\t\t\t\t\t\t\t<img className=\"Preview\" src={result} alt=\"\"/>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tpreview && (\n\t\t\t\t\t\t<Group title=\"Было\">\n\t\t\t\t\t\t\t<img className=\"Preview\" src={preview} alt=\"\"/>\n\t\t\t\t\t\t</Group>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t</Panel>\n\t)\n};\n\nHome.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n\tfetchedUser: PropTypes.shape({\n\t\tphoto_200: PropTypes.string,\n\t\tfirst_name: PropTypes.string,\n\t\tlast_name: PropTypes.string,\n\t\tcity: PropTypes.shape({\n\t\t\ttitle: PropTypes.string,\n\t\t}),\n\t}),\n};\n\nexport default Home;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, PanelHeader, HeaderButton, Group, Spinner, Button, File } from '@vkontakte/vkui';\nimport './Persik.css';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Camera from '@vkontakte/icons/dist/24/camera';\nimport Icon28CancelOutline from '@vkontakte/icons/dist/28/cancel_outline';\nimport * as cocoSsd from \"@tensorflow-models/coco-ssd\";\nimport \"@tensorflow/tfjs\";\n\nimport MobileDetect from 'mobile-detect';\n\nclass Persik extends React.Component {\n  videoRef = React.createRef();\n\tcanvasRef = React.createRef();\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tisLoading: true,\n\t\t\thasPerson: false\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tconst md = new MobileDetect(window.navigator.userAgent);\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      const webCamPromise = navigator.mediaDevices\n        .getUserMedia({\n          audio: false,\n          video: {\n            facingMode: !md.mobile() ? \"user\" : { exact: \"environment\" }\n          }\n        })\n        .then(stream => {\n          window.stream = stream;\n          this.videoRef.current.srcObject = stream;\n          return new Promise((resolve, reject) => {\n            this.videoRef.current.onloadedmetadata = () => {\n              resolve();\n            };\n          });\n        });\n      const modelPromise = cocoSsd.load();\n      Promise.all([modelPromise, webCamPromise])\n        .then(values => {\n\t\t\t\t\tthis.detectFrame(this.videoRef.current, values[0]);\n        })\n        .catch(error => {\n          console.error(error);\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t})\n\t\t\t\t})\n    }\n\t}\n\t\n\tmakePhoto = (e) => {\n\t\talert('sdf');\n\t}\n\n  detectFrame = (video, model) => {\n    model.detect(video).then(predictions => {\n\t\t\tconst hasPerson = predictions.some(p => p.class === 'person');\n\t\t\tthis.setState({\n\t\t\t\thasPerson\n\t\t\t})\n\n      this.renderPredictions(predictions);\n      requestAnimationFrame(() => {\n        this.detectFrame(video, model);\n      });\n    });\n  };\n\n  renderPredictions = predictions => {\n    const ctx = this.canvasRef.current.getContext(\"2d\");\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n    const font = \"16px sans-serif\";\n    ctx.font = font;\n\t\tctx.textBaseline = \"top\";\n    predictions.forEach(prediction => {\n      const x = prediction.bbox[0];\n      const y = prediction.bbox[1];\n      const width = prediction.bbox[2];\n      const height = prediction.bbox[3];\n\n      ctx.strokeStyle = \"#00FFFF\";\n      ctx.lineWidth = 4;\n      ctx.strokeRect(x, y, width, height);\n\n      ctx.fillStyle = \"#00FFFF\";\n      const textWidth = ctx.measureText(prediction.class).width;\n      const textHeight = parseInt(font, 10);\n      ctx.fillRect(x, y, textWidth + 4, textHeight + 4);\n    });\n\n    predictions.forEach(prediction => {\n      const x = prediction.bbox[0];\n      const y = prediction.bbox[1];\n\n      ctx.fillStyle = \"#000000\";\n      ctx.fillText(prediction.class, x, y);\n    });\n  };\n\n\n  render() {\n\t\tconst props = this.props;\n\t\tconst Icon = this.state.hasPerson ? Icon28CancelOutline : Icon24Camera;\n\t\tconst text = this.state.hasPerson ? 'СРОЧНО УБЕРИТЕ ЛЮДЕЙ!!!!!!' : 'Сфотографировать';\n\n    return (\n\t\t\t\t<Panel id={props.id}>\n\t\t\t\t\t<PanelHeader\n\t\t\t\t\t\tleft={<HeaderButton onClick={props.go} data-to=\"home\">\n\t\t\t\t\t\t\t<Icon24Back/>\n\t\t\t\t\t\t</HeaderButton>}\n\t\t\t\t\t>\n\t\t\t\t\t\tРезультаты\n\t\t\t\t\t</PanelHeader>\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.isLoading ? (\n\t\t\t\t\t\t\t\t<div className='Preloader'>\n\t\t\t\t\t\t\t\t\t<Spinner className=\"Spinner\" /> <span>Подготовка помощника</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<File\n\t\t\t\t\t\t\t\t\tsize=\"xl\"\n\t\t\t\t\t\t\t\t\tlevel=\"2\"\n\t\t\t\t\t\t\t\t\tonClick={this.makePhoto} before={<Icon />}\n\t\t\t\t\t\t\t\t\tdisabled={this.state.hasPerson}\n\t\t\t\t\t\t\t\t\taccept=\"image/*;capture=camera\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t\t\t</File>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<section className=\"Wrapper\">\n\t\t\t\t\t\t\t<video\n\t\t\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\t\t\tmuted\n\t\t\t\t\t\t\t\tref={this.videoRef}\n\t\t\t\t\t\t\t\twidth=\"400\"\n\t\t\t\t\t\t\t\theight=\"400\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<canvas\n\t\t\t\t\t\t\t\tclassName=\"Canvas\"\n\t\t\t\t\t\t\t\tref={this.canvasRef}\n\t\t\t\t\t\t\t\twidth=\"400\"\n\t\t\t\t\t\t\t\theight=\"400\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</Group>\n\t\t\t\t</Panel>\n\n    );\n  }\n}\nPersik.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n};\n\nexport default Persik;\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport Persik from './panels/Persik';\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactivePanel: 'home',\n\t\t\tfetchedUser: null,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(e.detail.type);\n\t\t\t}\n\t\t});\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t}\n\n\tgo = (e) => {\n\t\tthis.setState({ activePanel: e.currentTarget.dataset.to })\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel}>\n\t\t\t\t<Home id=\"home\" fetchedUser={this.state.fetchedUser} go={this.go} />\n\t\t\t\t<Persik id=\"persik\" go={this.go} />\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT \n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}