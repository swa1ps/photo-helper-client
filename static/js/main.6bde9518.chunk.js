(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,a){e.exports=a(197)},184:function(e,t,a){},190:function(e,t){},191:function(e,t){},192:function(e,t){},193:function(e,t){},194:function(e,t){},195:function(e,t){},197:function(e,t,a){"use strict";a.r(t);a(147),a(172);var n=a(2),r=a.n(n),c=a(17),i=a.n(c),o=a(32),l=a.n(o),s=a(38),u=a(39),d=a(41),f=a(40),m=a(42),h=a(7),v=(a(183),a(55)),b=a(84),g=a.n(b),p=function(e){var t=e.id,a=e.go,n=r.a.useState(null),c=Object(v.a)(n,2),i=c[0],o=c[1],l=r.a.useState(null),s=Object(v.a)(l,2),u=s[0],d=s[1];return r.a.createElement(h.f,{id:t},r.a.createElement(h.g,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),r.a.createElement(h.d,null,r.a.createElement(h.b,null,r.a.createElement(h.c,{top:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",before:r.a.createElement(g.a,null),size:"xl",level:"secondary",onChange:function(e){o(URL.createObjectURL(e.target.files[0])),d(URL.createObjectURL(e.target.files[0]))}})),r.a.createElement(h.b,null,r.a.createElement(h.a,{size:"xl",level:"2",onClick:a,"data-to":"persik"},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0444\u043e\u0442\u043e"))),r.a.createElement(h.d,null,i&&r.a.createElement("img",{className:"Preview",src:i,alt:""}),u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.h,{style:{margin:"12px 0"}}),r.a.createElement("img",{className:"Preview",src:u,alt:""}))))},E=(a(184),a(85)),w=a.n(E),R=a(86),x=a.n(R),P=a(87),j=(a(198),a(88)),k=a.n(j),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).videoRef=r.a.createRef(),a.canvasRef=r.a.createRef(),a.makePhoto=function(e){console.log("sdf")},a.detectFrame=function(e,t){t.detect(e).then(function(n){var r=n.some(function(e){return"person"===e.class});a.setState({hasPerson:r}),a.renderPredictions(n),requestAnimationFrame(function(){a.detectFrame(e,t)})})},a.renderPredictions=function(e){var t=a.canvasRef.current.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height);var n="16px sans-serif";t.font=n,t.textBaseline="top",e.forEach(function(e){var a=e.bbox[0],r=e.bbox[1],c=e.bbox[2],i=e.bbox[3];t.strokeStyle="#00FFFF",t.lineWidth=4,t.strokeRect(a,r,c,i),t.fillStyle="#00FFFF";var o=t.measureText(e.class).width,l=parseInt(n,10);t.fillRect(a,r,o+4,l+4)}),e.forEach(function(e){var a=e.bbox[0],n=e.bbox[1];t.fillStyle="#000000",t.fillText(e.class,a,n)})},a.state={isLoading:!0,hasPerson:!1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new k.a(window.navigator.userAgent);if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:t.mobile()?{exact:"environment"}:"user"}}).then(function(t){return window.stream=t,e.videoRef.current.srcObject=t,new Promise(function(t,a){e.videoRef.current.onloadedmetadata=function(){t()}})}),n=P.a();Promise.all([n,a]).then(function(t){e.detectFrame(e.videoRef.current,t[0])}).catch(function(e){console.error(e)}).finally(function(){e.setState({isLoading:!1})})}}},{key:"render",value:function(){var e=this.props;return r.a.createElement(h.f,{id:e.id},r.a.createElement(h.g,{left:r.a.createElement(h.e,{onClick:e.go,"data-to":"home"},r.a.createElement(w.a,null))},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"),r.a.createElement(h.d,null,this.state.isLoading?r.a.createElement("div",{className:"Preloader"},r.a.createElement(h.i,{className:"Spinner"})," ",r.a.createElement("span",null,"\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430")):r.a.createElement(h.a,{size:"xl",level:"2",onClick:this.makePhoto,before:r.a.createElement(x.a,null),disabled:this.state.hasPerson},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0444\u043e\u0442\u043e"),r.a.createElement("section",{className:"Wrapper"},r.a.createElement("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:this.videoRef,width:"300",height:"300"}),r.a.createElement("canvas",{className:"Canvas",ref:this.canvasRef,width:"300",height:"300"}))))}}]),t}(r.a.Component),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.state={activePanel:"home",fetchedUser:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;l.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;default:console.log(t.detail.type)}}),l.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){return r.a.createElement(h.j,{activePanel:this.state.activePanel},r.a.createElement(p,{id:"home",fetchedUser:this.state.fetchedUser,go:this.go}),r.a.createElement(y,{id:"persik",go:this.go}))}}]),t}(r.a.Component);l.a.send("VKWebAppInit",{}),i.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.6bde9518.chunk.js.map